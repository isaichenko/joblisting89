<<<<<<< HEAD
(function(){function t(a,m,r){m.is&&m.getCustomData("block_processed")||(m.is&&CKEDITOR.dom.element.setMarker(r,m,"block_processed",!0),a.push(m))}function q(a,m){function r(){this.foreach(function(a){/^(?!vbox|hbox)/.test(a.type)&&(a.setup||(a.setup=function(c){a.setValue(c.getAttribute(a.id)||"",1)}),a.commit||(a.commit=function(c){var g=this.getValue();if("dir"!=a.id||c.getComputedStyle("direction")!=g)g?c.setAttribute(a.id,g):c.removeAttribute(a.id)}))})}var q=function(){var f=CKEDITOR.tools.extend({},
CKEDITOR.dtd.$blockLimit);a.config.div_wrapTable&&(delete f.td,delete f.th);return f}(),u=CKEDITOR.dtd.div,n={},p=[];return{title:a.lang.div.title,minWidth:400,minHeight:165,contents:[{id:"info",label:a.lang.common.generalTab,title:a.lang.common.generalTab,elements:[{type:"hbox",widths:["50%","50%"],children:[{id:"elementStyle",type:"select",style:"width: 100%;",label:a.lang.div.styleSelectLabel,"default":"",items:[[a.lang.common.notSet,""]],onChange:function(){var f=["info:elementStyle","info:class",
"advanced:dir","advanced:style"],c=this.getDialog(),g=c._element&&c._element.clone()||new CKEDITOR.dom.element("div",a.document);this.commit(g,!0);for(var f=[].concat(f),b=f.length,k,e=0;e<b;e++)(k=c.getContentElement.apply(c,f[e].split(":")))&&k.setup&&k.setup(g,!0)},setup:function(f){for(var c in n)n[c].checkElementRemovable(f,!0,a)&&this.setValue(c,1)},commit:function(f){var c;(c=this.getValue())?n[c].applyToObject(f,a):f.removeAttribute("style")}},{id:"class",type:"text",requiredContent:"div(cke-xyz)",
label:a.lang.common.cssClass,"default":""}]}]},{id:"advanced",label:a.lang.common.advancedTab,title:a.lang.common.advancedTab,elements:[{type:"vbox",padding:1,children:[{type:"hbox",widths:["50%","50%"],children:[{type:"text",id:"id",requiredContent:"div[id]",label:a.lang.common.id,"default":""},{type:"text",id:"lang",requiredContent:"div[lang]",label:a.lang.common.langCode,"default":""}]},{type:"hbox",children:[{type:"text",id:"style",requiredContent:"div{cke-xyz}",style:"width: 100%;",label:a.lang.common.cssStyle,
"default":"",commit:function(a){a.setAttribute("style",this.getValue())}}]},{type:"hbox",children:[{type:"text",id:"title",requiredContent:"div[title]",style:"width: 100%;",label:a.lang.common.advisoryTitle,"default":""}]},{type:"select",id:"dir",requiredContent:"div[dir]",style:"width: 100%;",label:a.lang.common.langDir,"default":"",items:[[a.lang.common.notSet,""],[a.lang.common.langDirLtr,"ltr"],[a.lang.common.langDirRtl,"rtl"]]}]}]}],onLoad:function(){r.call(this);var f=this,c=this.getContentElement("info",
"elementStyle");a.getStylesSet(function(g){var b,k;if(g)for(var e=0;e<g.length;e++)k=g[e],k.element&&"div"==k.element&&(b=k.name,n[b]=k=new CKEDITOR.style(k),a.filter.check(k)&&(c.items.push([b,b]),c.add(b,b)));c[1<c.items.length?"enable":"disable"]();setTimeout(function(){f._element&&c.setup(f._element)},0)})},onShow:function(){"editdiv"==m&&this.setupContent(this._element=CKEDITOR.plugins.div.getSurroundDiv(a))},onOk:function(){if("editdiv"==m)p=[this._element];else{var f=[],c={},g=[],b,k=a.getSelection(),
e=k.getRanges(),n=k.createBookmarks(),h,l;for(h=0;h<e.length;h++)for(l=e[h].createIterator();b=l.getNextParagraph();)if(b.getName()in q&&!b.isReadOnly()){var d=b.getChildren();for(b=0;b<d.count();b++)t(g,d.getItem(b),c)}else{for(;!u[b.getName()]&&!b.equals(e[h].root);)b=b.getParent();t(g,b,c)}CKEDITOR.dom.element.clearAllMarkers(c);e=[];h=null;for(l=0;l<g.length;l++)b=g[l],d=a.elementPath(b).blockLimit,d.isReadOnly()&&(d=d.getParent()),a.config.div_wrapTable&&d.is(["td","th"])&&(d=a.elementPath(d.getParent()).blockLimit),
d.equals(h)||(h=d,e.push([])),b.getParent()&&e[e.length-1].push(b);for(h=0;h<e.length;h++)if(e[h].length){d=e[h][0];g=d.getParent();for(b=1;b<e[h].length;b++)g=g.getCommonAncestor(e[h][b]);g||(g=a.editable());l=new CKEDITOR.dom.element("div",a.document);for(b=0;b<e[h].length;b++){for(d=e[h][b];d.getParent()&&!d.getParent().equals(g);)d=d.getParent();e[h][b]=d}for(b=0;b<e[h].length;b++)d=e[h][b],d.getCustomData&&d.getCustomData("block_processed")||(d.is&&CKEDITOR.dom.element.setMarker(c,d,"block_processed",
!0),b||l.insertBefore(d),l.append(d));CKEDITOR.dom.element.clearAllMarkers(c);f.push(l)}k.selectBookmarks(n);p=f}f=p.length;for(c=0;c<f;c++)this.commitContent(p[c]),!p[c].getAttribute("style")&&p[c].removeAttribute("style");this.hide()},onHide:function(){"editdiv"==m&&this._element.removeCustomData("elementStyle");delete this._element}}}CKEDITOR.dialog.add("creatediv",function(a){return q(a,"creatediv")});CKEDITOR.dialog.add("editdiv",function(a){return q(a,"editdiv")})})();
=======
!function(){function f(e,t,n){t.is&&t.getCustomData("block_processed")||(t.is&&CKEDITOR.dom.element.setMarker(n,t,"block_processed",!0),e.push(t))}function t(m,c){function e(){this.foreach(function(n){/^(?!vbox|hbox)/.test(n.type)&&(n.setup||(n.setup=function(e){n.setValue(e.getAttribute(n.id)||"",1)}),n.commit||(n.commit=function(e){var t=this.getValue();"dir"==n.id&&e.getComputedStyle("direction")==t||(t?e.setAttribute(n.id,t):e.removeAttribute(n.id))}))})}var t,g=(t=CKEDITOR.tools.extend({},CKEDITOR.dtd.$blockLimit),m.config.div_wrapTable&&(delete t.td,delete t.th),t),u=CKEDITOR.dtd.div,a={},h=[];return{title:m.lang.div.title,minWidth:400,minHeight:165,contents:[{id:"info",label:m.lang.common.generalTab,title:m.lang.common.generalTab,elements:[{type:"hbox",widths:["50%","50%"],children:[{id:"elementStyle",type:"select",style:"width: 100%;",label:m.lang.div.styleSelectLabel,"default":"",items:[[m.lang.common.notSet,""]],onChange:function(){var e=["info:elementStyle","info:class","advanced:dir","advanced:style"],t=this.getDialog(),n=t._element&&t._element.clone()||new CKEDITOR.dom.element("div",m.document);this.commit(n,!0);for(var l,i=(e=[].concat(e)).length,o=0;o<i;o++)(l=t.getContentElement.apply(t,e[o].split(":")))&&l.setup&&l.setup(n,!0)},setup:function(e){for(var t in a)a[t].checkElementRemovable(e,!0,m)&&this.setValue(t,1)},commit:function(e){var t;(t=this.getValue())?a[t].applyToObject(e,m):e.removeAttribute("style")}},{id:"class",type:"text",requiredContent:"div(cke-xyz)",label:m.lang.common.cssClass,"default":""}]}]},{id:"advanced",label:m.lang.common.advancedTab,title:m.lang.common.advancedTab,elements:[{type:"vbox",padding:1,children:[{type:"hbox",widths:["50%","50%"],children:[{type:"text",id:"id",requiredContent:"div[id]",label:m.lang.common.id,"default":""},{type:"text",id:"lang",requiredContent:"div[lang]",label:m.lang.common.langCode,"default":""}]},{type:"hbox",children:[{type:"text",id:"style",requiredContent:"div{cke-xyz}",style:"width: 100%;",label:m.lang.common.cssStyle,"default":"",commit:function(e){e.setAttribute("style",this.getValue())}}]},{type:"hbox",children:[{type:"text",id:"title",requiredContent:"div[title]",style:"width: 100%;",label:m.lang.common.advisoryTitle,"default":""}]},{type:"select",id:"dir",requiredContent:"div[dir]",style:"width: 100%;",label:m.lang.common.langDir,"default":"",items:[[m.lang.common.notSet,""],[m.lang.common.langDirLtr,"ltr"],[m.lang.common.langDirRtl,"rtl"]]}]}]}],onLoad:function(){e.call(this);var i=this,o=this.getContentElement("info","elementStyle");m.getStylesSet(function(e){var t,n;if(e)for(var l=0;l<e.length;l++)(n=e[l]).element&&"div"==n.element&&(t=n.name,a[t]=n=new CKEDITOR.style(n),m.filter.check(n)&&(o.items.push([t,t]),o.add(t,t)));o[1<o.items.length?"enable":"disable"](),setTimeout(function(){i._element&&o.setup(i._element)},0)})},onShow:function(){"editdiv"==c&&this.setupContent(this._element=CKEDITOR.plugins.div.getSurroundDiv(m))},onOk:function(){if("editdiv"==c)h=[this._element];else{var e,t,n,l=[],i={},o=[],a=m.getSelection(),d=a.getRanges(),r=a.createBookmarks();for(t=0;t<d.length;t++)for(n=d[t].createIterator();e=n.getNextParagraph();)if(e.getName()in g&&!e.isReadOnly()){var s=e.getChildren();for(e=0;e<s.count();e++)f(o,s.getItem(e),i)}else{for(;!u[e.getName()]&&!e.equals(d[t].root);)e=e.getParent();f(o,e,i)}for(CKEDITOR.dom.element.clearAllMarkers(i),d=[],t=null,n=0;n<o.length;n++)e=o[n],(s=m.elementPath(e).blockLimit).isReadOnly()&&(s=s.getParent()),m.config.div_wrapTable&&s.is(["td","th"])&&(s=m.elementPath(s.getParent()).blockLimit),s.equals(t)||(t=s,d.push([])),e.getParent()&&d[d.length-1].push(e);for(t=0;t<d.length;t++)if(d[t].length){for(o=(s=d[t][0]).getParent(),e=1;e<d[t].length;e++)o=o.getCommonAncestor(d[t][e]);for(o||(o=m.editable()),n=new CKEDITOR.dom.element("div",m.document),e=0;e<d[t].length;e++){for(s=d[t][e];s.getParent()&&!s.getParent().equals(o);)s=s.getParent();d[t][e]=s}for(e=0;e<d[t].length;e++)(s=d[t][e]).getCustomData&&s.getCustomData("block_processed")||(s.is&&CKEDITOR.dom.element.setMarker(i,s,"block_processed",!0),e||n.insertBefore(s),n.append(s));CKEDITOR.dom.element.clearAllMarkers(i),l.push(n)}a.selectBookmarks(r),h=l}for(l=h.length,i=0;i<l;i++)this.commitContent(h[i]),!h[i].getAttribute("style")&&h[i].removeAttribute("style");this.hide()},onHide:function(){"editdiv"==c&&this._element.removeCustomData("elementStyle"),delete this._element}}}CKEDITOR.dialog.add("creatediv",function(e){return t(e,"creatediv")}),CKEDITOR.dialog.add("editdiv",function(e){return t(e,"editdiv")})}();
>>>>>>> 0ce8b76e35039cbab0dc8afcfff5dbd974e73a3d
